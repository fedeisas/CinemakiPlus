<html>

<head>

 
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript" language="JavaScript"></script>

<style>
    body {
        font-family: "Arial", sans-serif;
        width:200px;
        font-size:12px;
    }

    .b1 {
        font-weight:bold;
        background:#ccc;
        padding:3px;
        font-size:14px;
    }
    #status {
        color:red ;
    }

    #movies {
        padding-left:20px;
        width:100px;
    }

    #movies li {
        border-bottom: 1px solid  #ccc;
        margin-bottom: 2px;
    }

    #movies div {
        color: green;
        font-size:10px;
    }


    #movies a {
        float:right;
    }


    .foot {
        margin-top:5px;
        padding:3px;
        background:#ccc;
        overflow:hidden;

    }
    .butt {
        float:right;
        background: #3300ff;
        color: #ddd;
        -moz-border-radius: 4px;
        -webkit-border-radius: 4px;
        border: 1px solid #444;
        padding: 4px;
        cursor: pointer;
    }

    .d1 {
        border:5px solid #999;
        padding:10px;
        width:500px;
        margin: 100px 200px; 
        background: white;
        -moz-border-radius: 10px;
        -webkit-border-radius: 10px;
    }

    h2 {
        margin:10px 0 ;
        border-bottom:1px solid gray;
    }

    * {
        padding:0;
        margin:0;
    }
</style>

<script type="text/javascript">

// Saves options to localStorage.
function save_options() {

    var config = new Object;

    config.min_size     = parseInt( $("#min_size").val() );
    config.max_size     = parseInt( $("#max_size").val() );
    config.ck_id        = parseInt( $("#ck_id").val() );
    config.concurrent   = parseInt( $("#concurrent").val() );
    config.transmission         = $("#transmission").is(":checked");
    config.transmission_host     = $("#transmission_host").val();
    config.utorrent         = $("#utorrent").is(":checked");

    config.download         = $("#download").is(":checked");

    config.utorrent_host         = $("#utorrent_host").val();
    config.utorrent_port         = $("#utorrent_port").val();
    config.utorrent_user         = $("#utorrent_user").val();
    config.utorrent_pass         = $("#utorrent_pass").val();

    
    console.log(config);
    window.localStorage.clear();
    localStorage.setItem('config', JSON.stringify(config));
    
    // Update status to let user know options were saved.
    var status = document.getElementById("status");
    status.innerHTML = "Opciones grabadas!";

    setTimeout(function() {
        status.innerHTML = "";
    }, 750);


}

// Restores select box state to saved value from localStorage.
function restore_options() {


        // Retrieve the object from storage
        var t = localStorage.getItem('config');

        var config = new Object;

        if (t) {
            config = JSON.parse(t);
        }
        else  {
            config.min_size = 500;
            config.max_size = 1600;
            config.ck_id    = 7;
            config.transmission         = false;
            config.transmission_host    = '127.0.0.1';
            config.utorrent    = false;
            config.download    = true;
            config.concurrent      = 10;
            config.utorrent_host    = '127.0.0.1';
            config.utorrent_port    = '55972';
            config.utorrent_user    = 'admin';
            config.utorrent_pass    = '';
        }

        $("#min_size").val(config.min_size);
        $("#max_size").val(config.max_size);
        $("#ck_id").val(config.ck_id);
        $("#concurrent").val(config.concurrent);
        $("#transmission").attr("checked",config.transmission);
        $("#transmission_host").val(config.transmission_host);

        $("#utorrent").attr("checked",config.utorrent);
        $("#download").attr("checked",config.download);
        $("#utorrent_host").val(config.utorrent_host);
        $("#utorrent_port").val(config.utorrent_port);
        $("#utorrent_user").val(config.utorrent_user);
        $("#utorrent_pass").val(config.utorrent_pass);
}

</script>

<body onload="restore_options()" style="background:#ccc">

    <div class="d1">

        <h1> Cinemaki Plus </h1>

        <h2> Archivos buscados</h2>
        Tamaño mínimo (en MB) <input id="min_size" type="text">
        <br> Tamaño máximo (en MB)<input id="max_size" type="text">

        <br>Cuantos Torrents juntos?<input id="concurrent" type="text">
        <h2> Cinemaki</h2>
        ID de usuario: <input id="ck_id" type="text">

        <h2> 
        <input id="transmission" type="checkbox" value="on">
        Intregración con <a href="http://transmissionbt.com" target="_blank">Transmission App</a>
        </h2>
        (es necesario habilitar la interfase "remote" en Transmission)
        <br> Host <input id="transmission_host" type="text">


        <h2> 
        <input id="utorrent" type="checkbox" value="on">
        Intregración con <a href="http://www.utorrent.com/" target="_blank">uTorrent</a>
        </h2>
        (para esto es necesario habilitar la interfase "webui" en uTorrent)
        <a href='http://www.utorrent.com/help/guides/webui'>como?</a>
        <br> Host <input id="utorrent_host" type="text">
        <br> Puerto <input id="utorrent_port" type="text">
        <br> User <input id="utorrent_user" type="text">
        <br> Password <input id="utorrent_pass" type="text">


        <h2> 
        
        <input id="download" type="checkbox" value="on">
        Mostrar link para descargar torrents </h2>


        <div id="status"></div>

        <button class="butt" onclick="save_options()"> Grabar </button> 
    </div>

</body>
</html>
